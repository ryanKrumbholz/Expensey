{"ast":null,"code":"var _jsxFileName = \"/Users/ryankrumbholz/OneDrive/development/expensey/expensey-client/client/src/components/new_expense.js\";\nimport React from 'react';\nimport './new_expense.css';\n\nconst new_expense = props => {\n  var getCookie = cname => {\n    var name = cname + \"=\";\n    var decodedCookie = decodeURIComponent(document.cookie);\n    var ca = decodedCookie.split(';');\n\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n\n      while (c.charAt(0) == ' ') {\n        c = c.substring(1);\n      }\n\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length);\n      }\n    }\n\n    return \"\";\n  };\n\n  var createExpense = () => {\n    var userEmail = getCookie('email');\n    var eid = Date.now();\n    var date = document.getElementsByClassName(\"date\")[0].value;\n    var dateNum = document.getElementsByClassName(\"date\")[0].valueAsNumber;\n    var merchant = document.getElementsByClassName(\"merchant\")[0].value;\n    var amt = document.getElementsByClassName(\"amt\")[0].value;\n    var cat = document.getElementsByClassName(\"cat\")[0].value;\n    var desc = document.getElementsByClassName(\"desc\")[0].value;\n    var cardNum = document.getElementsByClassName(\"cardNum\")[0].value;\n    var cardType = detectCardType(cardNum);\n    var tag = \"\";\n    var link = \"\";\n\n    function checkFields() {\n      if (userEmail == \"\") {\n        return false;\n      }\n\n      if (merchant == \"\") {\n        return false;\n      }\n\n      if (amt == \"\") {\n        return false;\n      }\n\n      if (!parseFloat(amt)) {\n        return false;\n      }\n\n      if (cat == \"\") {\n        return false;\n      }\n\n      if (desc == \"\") {\n        return false;\n      }\n\n      if (cardNum == \"\") {\n        return false;\n      }\n\n      if (!dateNum) {\n        return false;\n      }\n\n      return true;\n    }\n\n    function getLastFour(cardNum) {\n      var length = cardNum.length;\n      var lastFour = \"\" + cardNum[length - 4] + cardNum[length - 3] + cardNum[length - 2] + cardNum[length - 1];\n      return lastFour;\n    }\n\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: userEmail,\n        id: eid,\n        date: date,\n        dateNum: dateNum,\n        merchant: merchant,\n        amount: parseFloat(amt),\n        category: cat,\n        cardType: cardType,\n        cardNum: getLastFour(cardNum),\n        description: desc,\n        tag: tag,\n        receiptImgLink: link,\n        status: \"unreported\"\n      })\n    };\n\n    if (checkFields() == true) {\n      fetch('https://api.expensey.app/users/expenses/add_expense', requestOptions).then(res => res.json()).then(data => {\n        console.log(data);\n\n        if (data == 'Expense saved successfully.') {\n          props.toggleWindow();\n          window.location.reload();\n        }\n      }).catch(error => console.log(error));\n    } else {\n      console.log(\"Field missing\");\n    }\n  };\n\n  function detectCardType(number) {\n    var re = {\n      electron: /^(4026|417500|4405|4508|4844|4913|4917)\\d+$/,\n      maestro: /^(5018|5020|5038|5612|5893|6304|6759|6761|6762|6763|0604|6390)\\d+$/,\n      dankort: /^(5019)\\d+$/,\n      interpayment: /^(636)\\d+$/,\n      unionpay: /^(62|88)\\d+$/,\n      visa: /^4[0-9]{12}(?:[0-9]{3})?$/,\n      mastercard: /^5[1-5][0-9]{14}$/,\n      amex: /^3[47][0-9]{13}$/,\n      diners: /^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,\n      discover: /^6(?:011|5[0-9]{2})[0-9]{12}$/,\n      jcb: /^(?:2131|1800|35\\d{3})\\d{11}$/\n    };\n\n    for (var key in re) {\n      if (re[key].test(number)) {\n        return key;\n      }\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"window\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\",\n    class: \"toggleButton\",\n    onClick: props.toggleWindow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"windowContents\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"textboxes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"From\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    class: \"date\",\n    type: \"date\",\n    id: \"\",\n    name: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }, \"Merchant\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"merchant\",\n    type: \"text\",\n    onChange: \"\",\n    placeholder: \"ex. Expensey\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }, \"Amount\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"amt\",\n    type: \"text\",\n    onChange: \"\",\n    placeholder: \"ex. 9.99\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"cat\",\n    type: \"text\",\n    onChange: \"\",\n    placeholder: \"ex. Food\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"desc\",\n    type: \"text\",\n    onChange: \"\",\n    placeholder: \"Stuff about the expense goes here!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 29\n    }\n  }, \"Card Number\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"desc\",\n    type: \"text\",\n    onChange: \"\",\n    placeholder: \"Stuff about the expense goes here!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"receiptUpload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }, \"Receipt\"), /*#__PURE__*/React.createElement(\"form\", {\n    class: \"box\",\n    method: \"post\",\n    action: \"\",\n    enctype: \"multipart/form-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"box_input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"fileUp\",\n    onClick: \"action_page.php\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"box_file\",\n    type: \"file\",\n    name: \"files[]\",\n    id: \"file\",\n    \"data-multiple-caption\": \"{count} files selected\",\n    multiple: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"file\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 55\n    }\n  }, \"Choose a file\"), /*#__PURE__*/React.createElement(\"span\", {\n    class: \"box__dragndrop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 85\n    }\n  }, \" or drag it here\"), \".\"))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"box_uploading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 29\n    }\n  }, \"Uploading\\u2026\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"box_success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 29\n    }\n  }, \"Done!\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"box_error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 29\n    }\n  }, \"Error! \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 59\n    }\n  }), \".\")))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: createExpense,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }, \"Save\")));\n};\n\nexport default new_expense;","map":{"version":3,"sources":["/Users/ryankrumbholz/OneDrive/development/expensey/expensey-client/client/src/components/new_expense.js"],"names":["React","new_expense","props","getCookie","cname","name","decodedCookie","decodeURIComponent","document","cookie","ca","split","i","length","c","charAt","substring","indexOf","createExpense","userEmail","eid","Date","now","date","getElementsByClassName","value","dateNum","valueAsNumber","merchant","amt","cat","desc","cardNum","cardType","detectCardType","tag","link","checkFields","parseFloat","getLastFour","lastFour","requestOptions","method","headers","body","JSON","stringify","email","id","amount","category","description","receiptImgLink","status","fetch","then","res","json","data","console","log","toggleWindow","window","location","reload","catch","error","number","re","electron","maestro","dankort","interpayment","unionpay","visa","mastercard","amex","diners","discover","jcb","key","test"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './new_expense.css';\n\nconst new_expense = props => {\n\n    var getCookie = cname => {\n        var name = cname + \"=\";\n        var decodedCookie = decodeURIComponent(document.cookie);\n        var ca = decodedCookie.split(';');\n        for(var i = 0; i <ca.length; i++) {\n          var c = ca[i];\n          while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n          }\n          if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n          }\n        }\n        return \"\";\n      }\n\n    var  createExpense = () => {\n\n        var userEmail = getCookie('email');\n        var eid = Date.now();\n        var date = document.getElementsByClassName(\"date\")[0].value;\n        var dateNum = document.getElementsByClassName(\"date\")[0].valueAsNumber;\n        var merchant = document.getElementsByClassName(\"merchant\")[0].value;\n        var amt = document.getElementsByClassName(\"amt\")[0].value;\n        var cat = document.getElementsByClassName(\"cat\")[0].value;\n        var desc = document.getElementsByClassName(\"desc\")[0].value;\n        var cardNum = document.getElementsByClassName(\"cardNum\")[0].value;\n        var cardType = detectCardType(cardNum);\n        var tag = \"\";\n        var link = \"\";\n\n        function checkFields() {\n            if (userEmail  == \"\")  {\n                return false;\n            }\n            if (merchant  == \"\")  {\n                return false;\n            }\n            if (amt  == \"\")  {\n                return false;\n            }\n            if (!parseFloat(amt)){\n                return false;\n            }\n            if (cat  == \"\")  {\n                return false;\n            }\n            if (desc == \"\")  {\n                return false;\n            }\n            if (cardNum == \"\")  {\n                return false;\n            }\n            if (!dateNum) {\n                return false;\n            }           \n            return true;\n        }\n\n        function getLastFour(cardNum){\n            var length = cardNum.length\n            var lastFour = \"\" + cardNum[length-4] + cardNum[length-3] + cardNum[length-2] + cardNum[length-1];\n            return lastFour\n        }\n        \n        const requestOptions =\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email : userEmail,\n            id: eid,\n            date: date,\n            dateNum: dateNum,\n            merchant: merchant,\n            amount: parseFloat(amt),\n            category: cat,\n            cardType: cardType,\n            cardNum: getLastFour(cardNum),\n            description: desc,\n            tag: tag,\n            receiptImgLink: link,\n            status : \"unreported\"\n            })};\n    \n        if (checkFields()==true) {\n          fetch('https://api.expensey.app/users/expenses/add_expense',requestOptions) \n              .then(res => res.json())\n              .then (data => \n                {\n                    console.log(data);\n                    if (data == 'Expense saved successfully.'){\n                        props.toggleWindow();\n                        window.location.reload();\n                    }\n                    \n                })\n              .catch(error => console.log(error));\n          }\n        else {\n            console.log(\"Field missing\");\n        }\n    }\n\n    function detectCardType(number) {\n        var re = {\n            electron: /^(4026|417500|4405|4508|4844|4913|4917)\\d+$/,\n            maestro: /^(5018|5020|5038|5612|5893|6304|6759|6761|6762|6763|0604|6390)\\d+$/,\n            dankort: /^(5019)\\d+$/,\n            interpayment: /^(636)\\d+$/,\n            unionpay: /^(62|88)\\d+$/,\n            visa: /^4[0-9]{12}(?:[0-9]{3})?$/,\n            mastercard: /^5[1-5][0-9]{14}$/,\n            amex: /^3[47][0-9]{13}$/,\n            diners: /^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,\n            discover: /^6(?:011|5[0-9]{2})[0-9]{12}$/,\n            jcb: /^(?:2131|1800|35\\d{3})\\d{11}$/\n        }\n    \n        for(var key in re) {\n            if(re[key].test(number)) {\n                return key\n            }\n        }\n    }\n    \n    return (\n        <div className=\"bg\">\n            <div className=\"window\">\n                <a href='/' class=\"toggleButton\" onClick={props.toggleWindow}>×</a>\n                <div class=\"windowContents\">\n                    <div class=\"textboxes\">\n                        <h3>Date</h3>\n                        <label for=\"From\"></label>\n                        <input class=\"date\" type=\"date\" id=\"\" name=\"\"/>\n                        <h3>Merchant</h3>\n                            <label>\n                            <input class=\"merchant\" type=\"text\" onChange=\"\" placeholder=\"ex. Expensey\" />\n                            </label>\n                        <h3>Amount</h3>\n                            <label>\n                            <input class=\"amt\" type=\"text\" onChange=\"\" placeholder=\"ex. 9.99\" />\n                            </label>\n                        <h3>Category</h3>\n                            <label>\n                            <input class=\"cat\" type=\"text\" onChange=\"\" placeholder=\"ex. Food\" />\n                            </label>\n                        <h3>Description</h3>\n                            <label>\n                            <input class=\"desc\" type=\"text\" onChange=\"\" placeholder=\"Stuff about the expense goes here!\" />\n                            </label>\n                            <h3>Card Number</h3>\n                                <label>\n                                <input class=\"desc\" type=\"text\" onChange=\"\" placeholder=\"Stuff about the expense goes here!\" />\n                                </label>\n                    </div>\n                        \n                  \n                    <div class=\"receiptUpload\">\n                        <h3>Receipt</h3>\n                        <form class=\"box\" method=\"post\" action=\"\" enctype=\"multipart/form-data\">\n                            <div class=\"box_input\">\n                                <div class=\"fileUp\" onClick=\"action_page.php\">\n                                <input class=\"box_file\" type=\"file\" name=\"files[]\" id=\"file\" data-multiple-caption=\"{count} files selected\" multiple />\n                                    <label for=\"file\"><strong>Choose a file</strong><span class=\"box__dragndrop\"> or drag it here</span>.</label>\n                                </div>\n                            </div>\n                            <div class=\"box_uploading\">Uploading&hellip;</div>\n                            <div class=\"box_success\">Done!</div>\n                            <div class=\"box_error\">Error! <span></span>.</div>\n                        </form>\n                    </div>\n                </div>\n                <button onClick={createExpense}>Save</button>\n            </div>\n        </div>\n    )\n  }\n  \n  export default new_expense;"]},"metadata":{},"sourceType":"module"}