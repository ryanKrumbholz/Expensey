{"ast":null,"code":"var _jsxFileName = \"/Users/ryankrumbholz/OneDrive/development/expensey/expensey-client/client/src/components/new_expense.js\";\nimport React from 'react';\nimport './new_expense.css';\n\nconst new_expense = props => {\n  var getCookie = cname => {\n    var name = cname + \"=\";\n    var decodedCookie = decodeURIComponent(document.cookie);\n    var ca = decodedCookie.split(';');\n\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n\n      while (c.charAt(0) == ' ') {\n        c = c.substring(1);\n      }\n\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length);\n      }\n    }\n\n    return \"\";\n  };\n\n  var createExpense = () => {\n    var userEmail = getCookie('email');\n    var eid = Date.now();\n    var date = document.getElementsByClassName(\"date\")[0].value;\n    var dateNum = document.getElementsByClassName(\"date\")[0].valueAsNumber;\n    var merchant = document.getElementsByClassName(\"merchant\")[0].value;\n    var amt = document.getElementsByClassName(\"amt\")[0].value;\n    var cat = document.getElementsByClassName(\"cat\")[0].value;\n    var desc = document.getElementsByClassName(\"desc\")[0].value;\n    var ccNum = document.getElementsByClassName(\"cardNum\")[0].value;\n    var ccType = detectCardType(ccNum);\n    var tags = document.getElementsByClassName(\"tags\")[0].value;\n    var files = document.getElementsByClassName(\"box_file\")[0].files;\n    var file = null;\n\n    if (files) {\n      file = files[0];\n    }\n\n    function checkFields() {\n      if (userEmail == \"\") {\n        return false;\n      }\n\n      if (merchant == \"\") {\n        return false;\n      }\n\n      if (amt == \"\") {\n        return false;\n      }\n\n      if (!parseFloat(amt)) {\n        return false;\n      }\n\n      if (cat == \"\") {\n        return false;\n      }\n\n      if (desc == \"\") {\n        return false;\n      }\n\n      if (ccNum == \"\") {\n        return false;\n      }\n\n      if (!dateNum) {\n        return false;\n      }\n\n      return true;\n    }\n\n    function getLastFour(cardNum) {\n      var length = cardNum.length;\n      var lastFour = \"\" + cardNum[length - 4] + cardNum[length - 3] + cardNum[length - 2] + cardNum[length - 1];\n      return lastFour;\n    }\n\n    const formData = new FormData(); // formData.append('file', file);\n\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Accept': 'multipart/form-data',\n        'Content-Type': 'multipart/form-data;boundary=6ff46e0b6b5148d984f148b6542e5a5d'\n      },\n      body: formData //   JSON.stringify({\n      //     email : userEmail,\n      //     id: eid,\n      //     date: date,\n      //     dateNum: dateNum,\n      //     merchant: merchant,\n      //     amount: parseFloat(amt),\n      //     category: cat,\n      //     ccData: ccType + ' x ' + getLastFour(ccNum),\n      //     description: desc,\n      //     tags: tags.split(', '),\n      //     receiptImg: file,\n      //     status : \"unreported\"\n      //     })\n\n    };\n\n    if (checkFields() == true) {\n      fetch('https://localhost:9000/users/expenses/add_expense', requestOptions).then(res => res.json()).then(data => {\n        console.log(data);\n\n        if (data == 'Expense saved successfully.') {\n          props.toggleWindow();\n          window.location.reload();\n        }\n      }).catch(error => console.log(error));\n    } else {\n      console.log(\"Field missing\");\n    }\n  };\n\n  function detectCardType(number) {\n    var re = {\n      electron: /^(4026|417500|4405|4508|4844|4913|4917)\\d+$/,\n      maestro: /^(5018|5020|5038|5612|5893|6304|6759|6761|6762|6763|0604|6390)\\d+$/,\n      dankort: /^(5019)\\d+$/,\n      interpayment: /^(636)\\d+$/,\n      unionpay: /^(62|88)\\d+$/,\n      visa: /^4[0-9]{12}(?:[0-9]{3})?$/,\n      mastercard: /^5[1-5][0-9]{14}$/,\n      amex: /^3[47][0-9]{13}$/,\n      diners: /^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,\n      discover: /^6(?:011|5[0-9]{2})[0-9]{12}$/,\n      jcb: /^(?:2131|1800|35\\d{3})\\d{11}$/\n    };\n\n    for (var key in re) {\n      if (re[key].test(number)) {\n        return key;\n      }\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"window\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\",\n    class: \"toggleButton\",\n    onClick: props.toggleWindow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"windowContents\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"textboxes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"From\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    class: \"date\",\n    type: \"date\",\n    id: \"\",\n    name: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, \"Merchant\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"merchant\",\n    type: \"text\",\n    onChange: \"\",\n    placeholder: \"ex. Expensey\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, \"Amount\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"amt\",\n    type: \"text\",\n    onChange: \"\",\n    placeholder: \"ex. 9.99\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 25\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"cat\",\n    type: \"text\",\n    onChange: \"\",\n    placeholder: \"ex. Food\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 25\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"desc\",\n    type: \"text\",\n    onChange: \"\",\n    placeholder: \"Stuff about the expense goes here!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"receiptUpload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }, \"Card Number\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"cardNum\",\n    type: \"text\",\n    onChange: \"\",\n    placeholder: \"ex. 1234567890123456\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 25\n    }\n  }, \"Tags\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"tags\",\n    type: \"text\",\n    onChange: \"\",\n    placeholder: \"ex. John Smith, Clients, idk\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  }, \"Receipt\"), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"fileUp\",\n    onClick: \"action_page.php\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"box_file\",\n    type: \"file\",\n    name: \"file\",\n    id: \"file\",\n    \"data-multiple-caption\": \"{count} files selected\",\n    multiple: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"file\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 55\n    }\n  }, \"Choose a file\"))))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: createExpense,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }, \"Save\")));\n};\n\nexport default new_expense;","map":{"version":3,"sources":["/Users/ryankrumbholz/OneDrive/development/expensey/expensey-client/client/src/components/new_expense.js"],"names":["React","new_expense","props","getCookie","cname","name","decodedCookie","decodeURIComponent","document","cookie","ca","split","i","length","c","charAt","substring","indexOf","createExpense","userEmail","eid","Date","now","date","getElementsByClassName","value","dateNum","valueAsNumber","merchant","amt","cat","desc","ccNum","ccType","detectCardType","tags","files","file","checkFields","parseFloat","getLastFour","cardNum","lastFour","formData","FormData","requestOptions","method","headers","body","fetch","then","res","json","data","console","log","toggleWindow","window","location","reload","catch","error","number","re","electron","maestro","dankort","interpayment","unionpay","visa","mastercard","amex","diners","discover","jcb","key","test"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './new_expense.css';\n\nconst new_expense = props => {\n\n    var getCookie = cname => {\n        var name = cname + \"=\";\n        var decodedCookie = decodeURIComponent(document.cookie);\n        var ca = decodedCookie.split(';');\n        for(var i = 0; i <ca.length; i++) {\n          var c = ca[i];\n          while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n          }\n          if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n          }\n        }\n        return \"\";\n      }\n\n    var  createExpense = () => {\n\n        var userEmail = getCookie('email');\n        var eid = Date.now();\n        var date = document.getElementsByClassName(\"date\")[0].value;\n        var dateNum = document.getElementsByClassName(\"date\")[0].valueAsNumber;\n        var merchant = document.getElementsByClassName(\"merchant\")[0].value;\n        var amt = document.getElementsByClassName(\"amt\")[0].value;\n        var cat = document.getElementsByClassName(\"cat\")[0].value;\n        var desc = document.getElementsByClassName(\"desc\")[0].value;\n        var ccNum = document.getElementsByClassName(\"cardNum\")[0].value;\n        var ccType = detectCardType(ccNum);\n        var tags = document.getElementsByClassName(\"tags\")[0].value;\n        var files = document.getElementsByClassName(\"box_file\")[0].files;\n        var file = null;\n        if (files) {\n            file =  files[0];\n        }\n        function checkFields() {\n            if (userEmail  == \"\")  {\n                return false;\n            }\n            if (merchant  == \"\")  {\n                return false;\n            }\n            if (amt  == \"\")  {\n                return false;\n            }\n            if (!parseFloat(amt)){\n                return false;\n            }\n            if (cat  == \"\")  {\n                return false;\n            }\n            if (desc == \"\")  {\n                return false;\n            }\n            if (ccNum == \"\")  {\n                return false;\n            }\n            if (!dateNum) {\n                return false;\n            }           \n            return true;\n        }\n\n        function getLastFour(cardNum){\n            var length = cardNum.length\n            var lastFour = \"\" + cardNum[length-4] + cardNum[length-3] + cardNum[length-2] + cardNum[length-1];\n            return lastFour\n        }\n\n        const formData = new FormData();\n        // formData.append('file', file);\n\n        const requestOptions =\n        {\n          method: 'POST',\n          headers: {\n            'Accept': 'multipart/form-data',\n            'Content-Type': 'multipart/form-data;boundary=6ff46e0b6b5148d984f148b6542e5a5d'\n          },\n          body: formData\n        //   JSON.stringify({\n        //     email : userEmail,\n        //     id: eid,\n        //     date: date,\n        //     dateNum: dateNum,\n        //     merchant: merchant,\n        //     amount: parseFloat(amt),\n        //     category: cat,\n        //     ccData: ccType + ' x ' + getLastFour(ccNum),\n        //     description: desc,\n        //     tags: tags.split(', '),\n        //     receiptImg: file,\n        //     status : \"unreported\"\n        //     })\n        };\n    \n        if (checkFields()==true) {\n          fetch('https://localhost:9000/users/expenses/add_expense',requestOptions) \n              .then(res => res.json())\n              .then (data => \n                {\n                    console.log(data);\n                    if (data == 'Expense saved successfully.'){\n                        props.toggleWindow();\n                        window.location.reload();\n                    }\n                })\n              .catch(error => console.log(error));\n          }\n        else {\n            console.log(\"Field missing\");\n        }\n    }\n\n    function detectCardType(number) {\n        var re = {\n            electron: /^(4026|417500|4405|4508|4844|4913|4917)\\d+$/,\n            maestro: /^(5018|5020|5038|5612|5893|6304|6759|6761|6762|6763|0604|6390)\\d+$/,\n            dankort: /^(5019)\\d+$/,\n            interpayment: /^(636)\\d+$/,\n            unionpay: /^(62|88)\\d+$/,\n            visa: /^4[0-9]{12}(?:[0-9]{3})?$/,\n            mastercard: /^5[1-5][0-9]{14}$/,\n            amex: /^3[47][0-9]{13}$/,\n            diners: /^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,\n            discover: /^6(?:011|5[0-9]{2})[0-9]{12}$/,\n            jcb: /^(?:2131|1800|35\\d{3})\\d{11}$/\n        }\n    \n        for(var key in re) {\n            if(re[key].test(number)) {\n                return key\n            }\n        }\n    }\n    \n    return (\n        <div className=\"bg\">\n            <div className=\"window\">\n                <a href='/' class=\"toggleButton\" onClick={props.toggleWindow}>×</a>\n                <div class=\"windowContents\">\n                    <div class=\"textboxes\">\n                        <h3>Date</h3>\n                        <label for=\"From\"></label>\n                        <input class=\"date\" type=\"date\" id=\"\" name=\"\"/>\n                        <h3>Merchant</h3>\n                            <label>\n                            <input class=\"merchant\" type=\"text\" onChange=\"\" placeholder=\"ex. Expensey\" />\n                            </label>\n                        <h3>Amount</h3>\n                            <label>\n                            <input class=\"amt\" type=\"text\" onChange=\"\" placeholder=\"ex. 9.99\" />\n                            </label>\n                        <h3>Category</h3>\n                            <label>\n                            <input class=\"cat\" type=\"text\" onChange=\"\" placeholder=\"ex. Food\" />\n                            </label>\n                        <h3>Description</h3>\n                            <label>\n                            <input class=\"desc\" type=\"text\" onChange=\"\" placeholder=\"Stuff about the expense goes here!\" />\n                            </label>\n                            </div>\n\n                    <div class=\"receiptUpload\">\n                        <h3>Card Number</h3>\n                                <label>\n                                <input class=\"cardNum\" type=\"text\" onChange=\"\" placeholder=\"ex. 1234567890123456\" />\n                                </label>\n                        <h3>Tags</h3>\n                                <label>\n                                <input class=\"tags\" type=\"text\" onChange=\"\" placeholder=\"ex. John Smith, Clients, idk\" />\n                                </label>\n                        <h3>Receipt</h3>\n                                <button class=\"fileUp\" onClick=\"action_page.php\">\n                                <input class=\"box_file\" type=\"file\" name=\"file\" id=\"file\" data-multiple-caption=\"{count} files selected\" multiple />\n                                    <label for=\"file\"><strong>Choose a file</strong></label>\n                                </button>\n                    </div>\n                    \n                </div>\n                <button onClick={createExpense}>Save</button>\n            </div>\n        </div>\n    )\n  }\n  \n  export default new_expense;"]},"metadata":{},"sourceType":"module"}